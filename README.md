# Books ETL Project

Це ETL скрипт який обробляє данні про книги з PostgreSQL бази (Neon). Він витягує записи книг, трансформує їх по бізнес-правилам і зберігає результат в таблицю books_processed.

## Архітектура
```
.
├── books_schema.sql    # SQL файл для створення таблиць в БД та наповнення їх даними 
├── books_etl.py        # Основний Python скрипт
├── requirements.txt    # Всі пітонівські залежності
└── README.md
```

## Що треба мати
- Python 3.8 або новіше
- PostgreSQL для створення і наповнення БД
- pip (щоб ставити пакети)

## Як встановити ??

### 1. Розпакувати архів
```bash
unzip books_etl_project.zip
cd books_etl_project
```

### 2. Поставити всі пакети Python
```bash
pip install -r requirements.txt
```

### 3. Налаштувати підключення до бази
У вас вже є файл `.env` з креденшалами, але якщо нема - потрібно створити його і заповни такими данними:

**Приклад .env файлу:**
```env
DB_HOST=ep-cool-project-12345.eu-central-1.aws.neon.tech
DB_PORT=5432
DB_NAME=neondb
DB_USER=neondb_owner
DB_PASSWORD=super_secret_password_123
```


**Що означають ці змінні:**
- `DB_HOST` - це адреса вашої БД  
- `DB_PORT` - порт для підключення
- `DB_NAME` - назва БД
- `DB_USER` - юзернейм
- `DB_PASSWORD` - пароль 


### 4. Створити таблиці в БД
Треба запустити SQL скрипт `books_schema.sql` 


## Як запустити ETL python скрипт

Просто запустіть Python файл і передайте дату з якої треба взяти книги:

```bash
python books_etl.py YYYY-MM-DD
```

### Приклади запуску

```bash
# Обробити всі книги що були оновлені з 1 січня 2025
python books_etl.py 2025-01-01

# Або з 15 січня
python books_etl.py 2025-01-15
```

### Що ви побачите в консолі
Якщо все працює, буде приблизно таке:
```
Початок ETL процесу для дати: 2025-01-01
--------------------------------------------------
Підключено до бази даних успішно
Витягнуто 4 записів з таблиці books
Трансформовано 4 записів
Збережено 4 записів в books_processed
--------------------------------------------------
ETL процес завершено успішно
```

## Шо скрипт робить з даними

### Правила трансформації
1. **original_price**: Просто копіює оригінальну ціну
2. **rounded_price**: Округляє ціну до 1 цифри після коми (наприклад 299.99 → 300.0)
3. **price_category**: Ставить категорію по ціні:
   - `budget`: якщо ціна менше 500 грн
   - `premium`: якщо ціна від 500 грн і вище

### Приклад як це працює
| Була ціна | Стала округлена | Категорія |
|-----------|----------------|-----------|
| 299.99 | 300.0 | budget |
| 450.50 | 450.5 | budget |
| 750.75 | 750.8 | premium |

## Якщо щось не працює

Скрипт вміє ловити такі помилки:
- Немає environment змінних (не задані креденшли)
- Не може законнектитись до бази
- Помилки в SQL запитах
- Неправильний формат дати (треба YYYY-MM-DD)
- Нема даних за цю дату (це не критично, просто повідомить)

## Якщо виникли проблеми

Перевір:
1. Чи правильно прописані всі креденшли в .env файлі
2. Чи правильний формат дати (має бути YYYY-MM-DD)
3. Чи є інтернет підключення
4. Чи точно працює ваша БД
